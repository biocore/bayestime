xx.test <- (pi*seq(60,300,10)/180)
yy.test <- 3+sin(xx.test) + rnorm(length(xx.test),0,0.15)
plot(xx.test, yy.test)
##(f)
```{r}
xxmat.test <- poly(xx.test,15,raw=TRUE)
lasso.pred=predict(lasso,s=best ,newx=xxmat.test)
lines(xx.test, lasso.pred, col = "red")
```
##(f)
```{r}
xxmat.test <- poly(xx.test,15,raw=TRUE)
lasso.pred=predict(lasso,s=best ,newx=xxmat.test)
lines(xx.test, lasso.pred, col = "red")
```
plot(xx.test, yy.test)
lines(xx.test, lasso.pred, col = "red")
plot(xx.test, yy.test)
lines(xx.test, lasso.pred, col = "red")
ll <- exp(seq(-8,1,0.5))
i <- which(log(ll) == -4)
which(log(ll) == -4)
which(log(ll) == -1)
which(log(ll) == 0)
install.packages("MiRKAT")
load('results_chemical/num_cluster_2_15.RData')
load('~/Dropbox/lab/Digestorresults_chemical/num_cluster_2_15.RData')
load('~/Dropbox/lab/Digestor/results_chemical/num_cluster_2_15.RData')
View(binary)
install.packages('NHANES')
library(NHANES)
data("NHANES")
force(NHANES)
View(NHANES)
summary(NHANES)
library(NHANES)
data("NHANES")
attach(NHANES)
NHANES <- NHANES[, order(colnames(NHANES))]
class(NHANES$TotChol)
TotChol <- na.omit(TotChol)
BPSysAve<-na.omit(BPSysAve)
BPDiaAve <- na.omit(BPDiaAve)
sum(BPDiaAve>90)
sum(BPSysAve>130 & BPDiaAve>90)
View(NHANES)
length(unique(ID))
length(unique(NHANES))
lenth(na.omit(Race3))
length(na.omit(Race3))
length(na.omit(Race1))
a <- data.frame(SurveyYr, Race3, Race1)
View(a)
a <- data.frame(ID, SurveyYr, Race3, Race1)
View(a)
a <- NHANES[,c('BPSysAve','Poverty')]
a <- na.omit(a)
plot(a$BPSysAve, a$Poverty)
vars <- data.frame(
BPSysAve,
Poverty,
BMI,
Pulse,
TotChol & DirectChol,
Depressd ,
SleepTrouble,
PhysActive,
PhysActiveDays,
SmokeNow,
Race3,
Age,
Gender,
MaritalStatus)
vars <- data.frame(
BPSysAve,
Poverty,
BMI,
Pulse,
TotChol,
DirectChol,
Depressd ,
SleepTrouble,
PhysActive,
PhysActiveDays,
SmokeNow,
Race3,
Age,
Gender,
MaritalStatus)
vars <- data.frame(
BPSysAve,
Poverty,
BMI,
Pulse,
TotChol,
DirectChol,
Depressd,
SleepTrouble,
PhysActive,
PhysActiveDays,
SmokeNow,
Race3,
Age,
Gender,
MaritalStatus)
vars <- data.frame(
BPSysAve,
Poverty,
BMI,
Pulse,
TotChol,
DirectChol,
Depression,
SleepTrouble,
PhysActive,
PhysActiveDays,
SmokeNow,
Race3,
Age,
Gender,
MaritalStatus)
vars <- data.frame(
BPSysAve,
Poverty,
BMI,
Pulse,
TotChol,
DirectChol,
Depression,
SleepTrouble,
PhysActive,
PhysActiveDays,
SmokeNow,
Race3,
Age,
Gender,
MaritalStatus)
Depression
vars <- data.frame(
BPSysAve,
Poverty,
BMI,
Pulse,
TotChol,
DirectChol,
Depress,
SleepTrouble,
PhysActive,
PhysActiveDays,
SmokeNow,
Race3,
Age,
Gender,
MaritalStatus)
vars <- data.frame(
BPSysAve,
Poverty,
BMI,
Pulse,
TotChol,
DirectChol,
Depressed,
SleepTrouble,
PhysActive,
PhysActiveDays,
SmokeNow,
Race3,
Age,
Gender,
MaritalStatus)
BPSysAve
library(NHANES)
data("NHANES")
attach(NHANES)
vars <- data.frame(
BPSysAve,
Poverty,
BMI,
Pulse,
TotChol,
DirectChol,
Depressed,
SleepTrouble,
PhysActive,
PhysActiveDays,
SmokeNow,
Race3,
Age,
Gender,
MaritalStatus)
MaritalStatus
BPSysAve
library(NHANES)
data("NHANES")
attach(NHANES)
NHANES <- NHANES[, order(colnames(NHANES))]
vars <- data.frame(
BPSysAve,
Poverty,
BMI,
Pulse,
TotChol,
DirectChol,
Depressed,
SleepTrouble,
PhysActive,
PhysActiveDays,
SmokeNow,
Race3,
Age,
Gender,
MaritalStatus)
View(vars)
vars_complete <- data.frame(
BPSysAve,
Poverty,
BMI,
Pulse,
TotChol,
DirectChol,
Depressed,
SleepTrouble,
PhysActive,
PhysActiveDays,
SmokeNow,
Race3,
Age,
Gender,
MaritalStatus)
var_omit <- na.omit(vars_complete)
View(var_omit)
View(var_omit)
View(NHANES)
plot(var_omit$BPSysAve, var_omit$Poverty)
plot(var_omit$BPSysAve, var_omit$Pulse)
plot(var_omit$BPSysAve, var_omit$TotChol)
plot(var_omit$BPSysAve, var_omit$Depressed)
plot(var_omit$BPSysAve, var_omit$PhysActive)
plot(var_omit$BPSysAve, var_omit$PhysActiveDays)
plot(var_omit$BPSysAve, var_omit$SmokeNow
plot(var_omit$BPSysAve, var_omit$SmokeNow)
plot(var_omit$BPSysAve, var_omit$SmokeNow)
plot(var_omit$BPSysAve, var_omit$DirectChol)
plot(var_omit$BPSysAve, var_omit$TotalChol)
TotalChol
plot(var_omit$BPSysAve, var_omit$TotChol)
# install.packages("sas7bdat")
# install.packages("corrplot")
# install.packages("tidyverse")
# remotes::install_github("ddsjoberg/gtsummary") ## to successfully install package "gtsummary" you need to update all required dependent package to the newest version.
library("sas7bdat")
mySASData = read.sas7bdat("originaldata.sas7bdat") #paste in the path where you save your data
install.packages('"sas7bdat"')
library(haven)
data <- read_sas('completedata.sas7bdat')
install.packages('sas7bdat')
# install.packages("sas7bdat")
install.packages("corrplot")
# install.packages("sas7bdat")
install.packages("corrplot")
install.packages("tidyverse")
# remotes::install_github("ddsjoberg/gtsummary") ## to successfully install package "gtsummary" you need to update all required dependent package to the newest version.
library("sas7bdat")
# remotes::install_github("ddsjoberg/gtsummary") ## to successfully install package "gtsummary" you need to update all required dependent package to the newest version.
library("sas7bdat")
library("corrplot")
library("dplyr")
mySASData = read.sas7bdat("originaldata.sas7bdat") #paste in the path where you save your data
mySASData = read.sas7bdat("originaldata.sas7bdat") #paste in the path where you save your data
setwd("~/Dropbox/umich/biostat650")
mySASData = read.sas7bdat("originaldata.sas7bdat") #paste in the path where you save your data
getwd()
mySASData = read.sas7bdat("originaldata.sas7bdat") #paste in the path where you save your data
mySASData = read.sas7bdat('originaldata.sas7bdat') #paste in the path where you save your data
dim(mySASData)
vars_complete <- data.frame(
BPSysAve,
Poverty,
BMI,
Pulse,
TotChol,
DirectChol,
Depressed,
SleepTrouble,
PhysActive,
PhysActiveDays,
SmokeNow,
Race1,
Age,
Gender,
MaritalStatus)
var_omit <- na.omit(vars_complete)
View(var_omit)
var_omit <- complete.cases(vars_complete)
var_omit <- na.omit(vars_complete)
View(var_omit)
plot(var_omit$BPSysAve, var_omit$TotChol)
plot(var_omit$BPSysAve, var_omit$Poverty)
vars_complete <- data.frame(
BPSysAve,
Poverty,
BMI,
Pulse,
TotChol,
DirectChol,
Depressed,
SleepTrouble,
PhysActive,
PhysActiveDays,
SmokeNow,
Race3,
Age,
Gender,
MaritalStatus)
var_omit <- na.omit(vars_complete)
table(var_omit$Race3)
462/612
a <- data.frame(ID, SurveyYr, Race3, Race1)
View(a)
View(vars)
q <- NHANES[,1]
w <- NHANES[,2]
View(q)
View(w)
q <- NHANES[1,]
w <- NHANES[2,]
View(q)
View(w)
w <- NHANES[c(1,2),]
View(w)
w <- NHANES[2,]
unlist(q)==unlist(w)
View(NHANES)
sum(is.na(PhysActive))
sum(is.na(PhysActiveDays))
b <- unique(nhanes)
b <- unique(NHANES)
View(b)
sum(is.na(AlcoholYear))
sum(is.na(AlcoholDay))
sum(is.na(Alcohol12PlusYr))
sum(is.na(Smoke100))
sum(is.na(Smoke100n))
sum(is.na(SmokeAge))
SmokeNow
sum(is.na(SmokeNow))
table(Smoke100)
table(Smoke100n)
table(Depressed)
sum(is.na(Depressed))
table(SleepTrouble)
table(SleepHrsNight)
sum(is.na(SleepTrouble))
sum(is.na(SleepHrsNight))
data("NHANES")
attach(NHANES)
vars_complete <- data.frame(
BPSysAve,
Poverty,
BMI,
Pulse,
TotChol,
DirectChol,
Depressed,
SleepTrouble,
PhysActive,
PhysActiveDays,
SmokeNow,
Race3,
Age,
Gender,
MaritalStatus)
TotChol
vars_complete <- data.frame(
BPSysAve,
Poverty,
BMI,
Pulse,
TotChol,
DirectChol,
Depressed,
SleepTrouble,
PhysActive,
SmokeNow,
Race3,
Age,
Gender,
MaritalStatus)
var_omit <- na.omit(vars_complete)
plot(var_omit$BPSysAve, var_omit$TotChol)
plot(var_omit$BPSysAve, var_omit$Poverty)
var_omit <- var_omit[var_omit$Age>20]
var_omit <- var_omit[,var_omit$Age>20]
var_omit <- var_omit[var_omit$Age>20,]
plot(var_omit$BPSysAve, var_omit$Poverty)
table(HHIncomeMid)
vars_complete <- data.frame(
BPSysAve,
Poverty,
BMI,
Pulse,
TotChol,
DirectChol,
Depressed,
SleepTrouble,
PhysActive,
SmokeNow,
Race3,
Age,
Gender,
MaritalStatus,
HHIncomeMid)
var_omit <- var_omit[var_omit$Age>20,]
plot(var_omit$BPSysAve, var_omit$HHIncomemid)
var_omit$HHIncomemid
vars_complete <- data.frame(
BPSysAve,
Poverty,
BMI,
Pulse,
TotChol,
DirectChol,
Depressed,
SleepTrouble,
PhysActive,
SmokeNow,
Race3,
Age,
Gender,
MaritalStatus,
HHIncomeMid)
var_omit <- na.omit(vars_complete)
var_omit <- var_omit[var_omit$Age>20,]
plot(var_omit$BPSysAve, var_omit$HHIncomemid)
plot(var_omit$BPSysAve, var_omit$HHIncomeMid)
plot(var_omit$BPSysAve, var_omit$TotChol)
Work
table(Work)
vars_complete <- data.frame(
SurveyYr,
BPSysAve,
Poverty,
BMI,
Pulse,
TotChol,
DirectChol,
Depressed,
SleepTrouble,
PhysActive,
SmokeNow,
Race3,
Age,
Gender,
MaritalStatus,
HHIncomeMid)
vars_complete <- data.frame(
SurveyYr,
BPSysAve,
Poverty,
BMI,
Pulse,
TotChol,
DirectChol,
Depressed,
SleepTrouble,
PhysActive,
SmokeNow,
Race3,
Age,
Gender,
MaritalStatus,
HHIncomeMid)
var_omit <- na.omit(vars_complete)
var_omit <- var_omit[var_omit$Age>=20,]
table(SurveyYr)
var_omit <- var_omit[var_omit$SurveyYr>='2011_12',]
var_omit <- var_omit[var_omit$SurveyYr=='2011_12',]
data("NHANES")
attach(NHANES)
nhanes_data <- NHANES %>%
filter(Age > 20,SurveyYr =="2011_12")
#create incomplete and complete flags
Variable_of_interest = c("SurveyYr", "BPSysAve", "Poverty", "BMI", "TotChol", "DirectChol", "Pulse", "Depressed",  "SleepTrouble", "PhysActive", "SmokeNow", "Race3", "Age", "Gender",  "MaritalStatus")
data_1 = nhanes_data %>%
select(Variable_of_interest)
### Create an indicator variable Incomplete (0 if all variables are complete; 1 if at least one variable is missing)
miss_num = apply(data_1, 1, function(x) sum(is.na(x)))
data_1$Incomplete = ifelse(miss_num>0, 1, 0)
data_1$Incomplete = as.factor(data_1$Incomplete)
data_complete = subset(data_1, data_1$Incomplete == 0)
data_incomplete = subset(data_1, data_1$Incomplete == 1)
sum(is.na(SurveyYr))
data("NHANESraw")
force(NHANESraw)
View(NHANESraw)
table(NHANESraw$Race3)
table(NHANES$Race3)
library(NHANES)
data("NHANES")
#andrea
summary(NHANES$SurveyYr)
NHANES2009_10 <-filter(NHANES,NHANES$SurveyYr=="2009_10")
NHANES2011_12 <-filter(NHANES, NHANES$SurveyYr=="2011_12")
data<-select(NHANES2011_12,Gender, Age, Race3, MaritalStatus, Poverty, BMI,Pulse, BPSysAve, DirectChol, TotChol, Depressed,SleepTrouble, PhysActive, AlcoholYear, SmokeNow)
data2<- data%>%
filter(Age >= 20)
miss_num = apply(data2, 1, function(x) sum(is.na(x)))
data2$Incomplete = ifelse(miss_num>0, 1, 0)
data2$Incomplete = as.factor(data2$Incomplete)
data2_complete = subset(data2, data2$Incomplete == 0)
data2_incomplete = subset(data2, data2$Incomplete == 1)
setwd("~/Dropbox/lab/SFPCA/BayesTime")
