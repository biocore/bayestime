'mean' = mu,
'sd' = sdd,
'median' = med,
'min' = minn,
'max' = maxx)
q1 <- quantile(Fatalism, 0.25)
q3 <- quantile(Fatalism, 0.75)
iqr <- q3 - q1
q2 <- median(Fatalism)
Fatalism_std <- (Fatalism - q2) / iqr
fit1 <- lm(Depression ~ age_cat + Fatalism_std + Sex + R_E)
summary(fit1)
anova(fit1)
fit1 <- lm(Depression ~ age_q1+ age_q2 + age_q3 + age_q4 + Fatalism_std + Sex + R_E)
summary(fit1)
anova(fit1)
fit1 <- lm(Depression ~ age_q2 + age_q3 + age_q4 + Fatalism_std + Sex + R_E)
summary(fit1)
ss.table <- anova(fit1)
ss.table
seqss <- sum(ss.table[1:3]$Sum.Sq))
seqss <- sum(ss.table[1:3z]$Sum.Sq))
seqss <- sum(ss.table[1:3, ]$Sum.Sq))
seqss <- sum(ss.table[1:3, ]$Sum.Sq)
ss.table[1:3, ]
ss.table[1:3, ]$Sum.Sq
seqss <- sum(ss.table[1:3, ]$`Sum Sq`)
seqdf <- sum(ss.table[1:3, ]$Df)
ss <- sum(ss.table[1:3, ]$`Sum Sq`)
df <- sum(ss.table[1:3, ]$Df)
mse <- ss.table['Residuals',]$`Sum Sq`/ss.table['Residuals',]$Df
fstat <- ss / df / mse
fpvalue <-  1-pf(q=fstat, df1=df, df2 = seq.table['Residuals',]$Df)
fpvalue <-  1-pf(q=fstat, df1=df, df2 = ss.table['Residuals',]$Df)
fit2 <- lm(Depression ~ age_cat + Fatalism_std + Sex + R_E)
summary(fit2)
fit3 <- lm(Depression ~ Age + Fatalism_std + Sex + R_E)
summary(fit3)
Age[age_cat==0]
age_sc3 <- rep(999, n)
age_sc3[age_cat==0] <- mean(Age[age_cat==0])
age_sc3[age_cat==1] <- mean(Age[age_cat==1])
age_sc3[age_cat==2] <- mean(Age[age_cat==2])
age_sc3[age_cat==3] <- mean(Age[age_cat==3])
age_sc3
ss.table['Residuals',]
sum(ss.table[1:3, ]$`Sum Sq`)
q1 <- quantile(Fatalism, 0.25)
q3 <- quantile(Fatalism, 0.75)
q2 <- median(Fatalism)
age_q1 <- 1*(Age <= age_quan[2])
age_q2 <- 1*(Age <= age_quan[3] & Age > age_quan[2])
age_q3 <- 1*(Age <= age_quan[4] & Age > age_quan[3])
age_q4 <- 1*(Age <= age_quan[5] & Age > age_quan[4])
fit1 <- lm(Depression ~ age_q2 + age_q3 + age_q4 + Fatalism_std + Sex + R_E)
q1 <- quantile(Fatalism, 0.25)
q3 <- quantile(Fatalism, 0.75)
iqr <- q3 - q1
q2 <- median(Fatalism)
Fatalism_std <- (Fatalism - q2) / iqr
data <- read_sas('completedata.sas7bdat')
attach(data)
n <- nrow(data)
age_quan <- quantile(Age)
age_cat <- rep(999, n)
age_cat[Age <= age_quan[2]] = 0
age_cat[Age <= age_quan[3] & Age > age_quan[2]] <- 1
age_cat[Age <= age_quan[4] & Age > age_quan[3]] <- 2
age_cat[Age <= age_quan[5] & Age > age_quan[4]] <- 3
data$age_cat <- age_cat
psych::describe(age_cat)
prop <- as.vector(table(age_cat)/n)
mu <- as.vector(by(data$Depression, age_cat, mean))
sdd <- as.vector(by(data$Depression, age_cat, sd))
med <- as.vector(by(data$Depression, age_cat, median))
minn <- as.vector(by(data$Depression, age_cat, min))
maxx <- as.vector(by(data$Depression, age_cat, max))
cbind('age_categories' = sort(unique(age_cat)),
'%' = prop,
'mean' = mu,
'sd' = sdd,
'median' = med,
'min' = minn,
'max' = maxx)
table(age_cat)
max(age_cat)
q1 <- quantile(Fatalism, 0.25)
q3 <- quantile(Fatalism, 0.75)
iqr <- q3 - q1
q2 <- median(Fatalism)
Fatalism_std <- (Fatalism - q2) / iqr
age_q1 <- 1*(Age <= age_quan[2])
age_q2 <- 1*(Age <= age_quan[3] & Age > age_quan[2])
age_q3 <- 1*(Age <= age_quan[4] & Age > age_quan[3])
age_q4 <- 1*(Age <= age_quan[5] & Age > age_quan[4])
fit1 <- lm(Depression ~ age_q2 + age_q3 + age_q4 + Fatalism_std + Sex + R_E)
summary(fit1)
Hmisc::describe(age_cat)
fit1 <- lm(Depression ~ age_q1+ age_q2 + age_q3 + age_q4 + Fatalism_std + Sex + R_E)
summary(fit1)
coef(fit1)
coefs['age_q4] = 0
fit1 <- lm(Depression ~ age_q1+ age_q2 + age_q3 + Fatalism_std + Sex + R_E)
summary(fit1)
'
)
fit1 <- lm(Depression ~ age_q1+ age_q2 + age_q3 + Fatalism_std + Sex + R_E)
summary(fit1)
quantile(Age)
fit1_1 <- lm(Depression ~ Fatalism_std + Sex + R_Ege_q1+ age_q2 + age_q3)
fit1_1 <- lm(Depression ~ Fatalism_std + Sex + R_E + age_q1+ age_q2 + age_q3)
lm(Depression ~ Fatalism_std + Sex + R_E + age_q1+ age_q2 + age_q3)
summary(fit1_1)
#summary(fit1_1)
ss.table <- anova(fit1_1)
ss.table
ss <- sum(ss.table[4:6, ]$`Sum Sq`)
df <- sum(ss.table[4:6, ]$Df)
mse <- ss.table['Residuals',]$`Sum Sq`/ss.table['Residuals',]$Df
fstat <- ss / df / mse
fpvalue <-  1-pf(q=fstat, df1=df, df2 = ss.table['Residuals',]$Df)
ss
fpvalue
fit2 <- lm(Depression ~ age_cat + Fatalism_std + Sex + R_E)
summary(fit2)
age_cat
fit2 <- lm(Depression ~ age_cat + Fatalism_std + Sex + R_E)
summary(fit2)
fit1 <- lm(Depression ~ factor(age_cat) + Fatalism_std + Sex + R_E)
summary(fit1)
fit1 <- lm(Depression ~ Fatalism_std + Sex + R_E+ factor(age_cat))
summary(fit1)
fit1 <- lm(Depression ~ factor(age_cat) + Fatalism_std + Sex + R_E)
summary(fit1)
factor(age_cat)
age_quan[3]
summary(fit1)
age_quan
fit1_1 <- lm(Depression ~ Fatalism_std + Sex + R_E + factor(age_cat))
#summary(fit1_1)
ss.table <- anova(fit1_1)
ss.table
ss <- sum(ss.table[4, ]$`Sum Sq`)
df <- sum(ss.table[4, ]$Df)
mse <- ss.table['Residuals',]$`Sum Sq`/ss.table['Residuals',]$Df
fstat <- ss / df / mse
fpvalue <-  1-pf(q=fstat, df1=df, df2 = ss.table['Residuals',]$Df)
fit2 <- lm(Depression ~ age_cat + Fatalism_std + Sex + R_E)
summary(fit2)
hist(Depression[age_cat==0])
hist(Depression[age_cat==1])
hist(Depression[age_cat==2])
hist(Depression[age_cat==3])
fit2$model
s <- summary(fit2)
s$coefficients$
d
s$coefficients
s$coefficients[, 'Pr(>|t|)']
s['age',]$coefficients[, 'Pr(>|t|)']
s$coefficients[, 'Pr(>|t|)']
s$coefficients[, 'Pr(>|t|)'][,'age_cat']
s$coefficients[, 'Pr(>|t|)']['age_cat']
coef(fit1_!)
coef(fit1_1)
coef(fit1_1)[2:4]
cbind(coef(fit1_1)[2:4], coef(fit2)[3:5], coef(fi3[3:5])
)
cbind(coef(fit1_1)[2:4], coef(fit2)[3:5], coef(fi3[3:5]))
cbind(coef(fit1_1)[2:4], coef(fit2)[3:5], coef(fit3[3:5]))
cbind(coef(fit1_1)[2:4], coef(fit2)[3:5], coef(fit3)[3:5])
fit3 <- lm(Depression ~ Age + Fatalism_std + Sex + R_E)
cbind(coef(fit1_1)[2:4], coef(fit2)[3:5], coef(fit3)[3:5])
cbind('dummy' = coef(fit1_1)[2:4],
'score'= coef(fit2)[3:5],
'continuous' = coef(fit3)[3:5])
age_sc1 <- rep(999, n)
age_sc1[age_cat==0] = 0
age_sc1[age_cat==1] <- 10
age_sc1[age_cat==2] <- 20
age_sc1[age_cat==3] <- 30
summary(lm(Depression ~ age_sc1 + Fatalism_std + Sex + R_E))$coefficients[, 'Pr(>|t|)']['age_sc1']
summary(lm(Depression ~ age_sc2 + Fatalism_std + Sex + R_E))$coefficients[, 'Pr(>|t|)']['age_sc2']
age_sc2 <- rep(999, n)
age_sc2[age_cat==0] = 0
age_sc2[age_cat==1] <- 10
age_sc2[age_cat==2] <- 20
age_sc2[age_cat==3] <- 300
summary(lm(Depression ~ age_sc2 + Fatalism_std + Sex + R_E))$coefficients[, 'Pr(>|t|)']['age_sc2']
age_sc3 <- rep(999, n)
age_sc3[age_cat==0] <- mean(Age[age_cat==0])
age_sc3[age_cat==1] <- mean(Age[age_cat==1])
age_sc3[age_cat==2] <- mean(Age[age_cat==2])
age_sc3[age_cat==3] <- mean(Age[age_cat==3])
summary(lm(Depression ~ age_sc3 + Fatalism_std + Sex + R_E))$coefficients[, 'Pr(>|t|)']['age_sc3']
var(age_sc3)
var(age_sc2)
var(age_sc1)
summary(lm(Depression ~ age_sc1 + Fatalism_std + Sex + R_E))$coefficients[, 'Pr(>|t|)']['age_sc1']
age_sc1 <- rep(999, n)
age_sc1[age_cat==0] = 0
age_sc1[age_cat==1] <- 10
age_sc1[age_cat==2] <- 20
age_sc1[age_cat==3] <- 30
var(age_sc1)
summary(lm(Depression ~ age_sc1 + Fatalism_std + Sex + R_E))$coefficients[, 'Pr(>|t|)']['age_sc1']
age_sc2 <- rep(999, n)
age_sc2[age_cat==0] = 0
age_sc2[age_cat==1] <- 10
age_sc2[age_cat==2] <- 20
age_sc2[age_cat==3] <- 300
var(age_sc2)
summary(lm(Depression ~ age_sc2 + Fatalism_std + Sex + R_E))$coefficients[, 'Pr(>|t|)']['age_sc2']
age_sc3 <- rep(999, n)
age_sc3[age_cat==0] <- mean(Age[age_cat==0])
age_sc3[age_cat==1] <- mean(Age[age_cat==1])
age_sc3[age_cat==2] <- mean(Age[age_cat==2])
age_sc3[age_cat==3] <- mean(Age[age_cat==3])
var(age_sc3)
summary(lm(Depression ~ age_sc3 + Fatalism_std + Sex + R_E))$coefficients[, 'Pr(>|t|)']['age_sc3']
q1 <- quantile(Fatalism, 0.25)
q3 <- quantile(Fatalism, 0.75)
iqr <- q3 - q1
q2 <- mean(Fatalism)
Fatalism_std <- (Fatalism - q2) / iqr
age_q1 <- 1*(Age <= age_quan[2])
age_q2 <- 1*(Age <= age_quan[3] & Age > age_quan[2])
age_q3 <- 1*(Age <= age_quan[4] & Age > age_quan[3])
age_q4 <- 1*(Age <= age_quan[5] & Age > age_quan[4])
fit1 <- lm(Depression ~ factor(age_cat) + Fatalism_std + Sex + R_E)
summary(fit1)
library(haven)
data <- read_sas('completedata.sas7bdat')
attach(data)
n <- nrow(data)
age_quan <- quantile(Age)
age_cat <- rep(999, n)
age_cat[Age <= age_quan[2]] = 0
age_cat[Age <= age_quan[3] & Age > age_quan[2]] <- 1
age_cat[Age <= age_quan[4] & Age > age_quan[3]] <- 2
age_cat[Age <= age_quan[5] & Age > age_quan[4]] <- 3
data$age_cat <- age_cat
Hmisc::describe(age_cat)
prop <- as.vector(table(age_cat)/n)
mu <- as.vector(by(data$Depression, age_cat, mean))
sdd <- as.vector(by(data$Depression, age_cat, sd))
med <- as.vector(by(data$Depression, age_cat, median))
minn <- as.vector(by(data$Depression, age_cat, min))
maxx <- as.vector(by(data$Depression, age_cat, max))
cbind('age_categories' = sort(unique(age_cat)),
'%' = prop,
'mean' = mu,
'sd' = sdd,
'median' = med,
'min' = minn,
'max' = maxx)
q1 <- quantile(Fatalism, 0.25)
q3 <- quantile(Fatalism, 0.75)
iqr <- q3 - q1
q2 <- mean(Fatalism)
Fatalism_std <- (Fatalism - q2) / iqr
age_q1 <- 1*(Age <= age_quan[2])
age_q2 <- 1*(Age <= age_quan[3] & Age > age_quan[2])
age_q3 <- 1*(Age <= age_quan[4] & Age > age_quan[3])
age_q4 <- 1*(Age <= age_quan[5] & Age > age_quan[4])
fit1 <- lm(Depression ~ factor(age_cat) + Fatalism_std + Sex + R_E)
summary(fit1)
fit1_1 <- lm(Depression ~ Fatalism_std + Sex + R_E + factor(age_cat))
#summary(fit1_1)
ss.table <- anova(fit1_1)
ss.table
ss <- sum(ss.table[4, ]$`Sum Sq`)
df <- sum(ss.table[4, ]$Df)
mse <- ss.table['Residuals',]$`Sum Sq`/ss.table['Residuals',]$Df
fstat <- ss / df / mse
fpvalue <-  1-pf(q=fstat, df1=df, df2 = ss.table['Residuals',]$Df)
fit2 <- lm(Depression ~ age_cat + Fatalism_std + Sex + R_E)
summary(fit2)
s <- summary(fit2)
s$coefficients[, 'Pr(>|t|)']['age_cat']
fit3 <- lm(Depression ~ Age + Fatalism_std + Sex + R_E)
summary(fit3)
cbind('dummy' = coef(fit1_1)[2:4],
'score'= coef(fit2)[3:5],
'continuous' = coef(fit3)[3:5])
age_sc1 <- rep(999, n)
age_sc1[age_cat==0] = 0
age_sc1[age_cat==1] <- 10
age_sc1[age_cat==2] <- 20
age_sc1[age_cat==3] <- 30
var(age_sc1)
summary(lm(Depression ~ age_sc1 + Fatalism_std + Sex + R_E))$coefficients[, 'Pr(>|t|)']['age_sc1']
age_sc2 <- rep(999, n)
age_sc2[age_cat==0] = 0
age_sc2[age_cat==1] <- 10
age_sc2[age_cat==2] <- 20
age_sc2[age_cat==3] <- 300
var(age_sc2)
summary(lm(Depression ~ age_sc2 + Fatalism_std + Sex + R_E))$coefficients[, 'Pr(>|t|)']['age_sc2']
age_sc3 <- rep(999, n)
age_sc3[age_cat==0] <- mean(Age[age_cat==0])
age_sc3[age_cat==1] <- mean(Age[age_cat==1])
age_sc3[age_cat==2] <- mean(Age[age_cat==2])
age_sc3[age_cat==3] <- mean(Age[age_cat==3])
var(age_sc3)
summary(lm(Depression ~ age_sc3 + Fatalism_std + Sex + R_E))$coefficients[, 'Pr(>|t|)']['age_sc3']
prop <- as.vector(table(age_cat)/n)
mu <- as.vector(by(data$Age, age_cat, mean))
sdd <- as.vector(by(data$Age, age_cat, sd))
med <- as.vector(by(data$Age, age_cat, median))
minn <- as.vector(by(data$Age, age_cat, min))
maxx <- as.vector(by(data$Age, age_cat, max))
cbind('age_categories' = sort(unique(age_cat)),
'%' = prop,
'mean' = mu,
'sd' = sdd,
'median' = med,
'min' = minn,
'max' = maxx)
confint(fit2)
confint(fit2)[3:6]
confint(fit2)
cbind('dummy' = coef(fit1_1)[2:4],
'score'= coef(fit2)[3:5],
'continuous' = coef(fit3)[3:5])
confint(fit1_1)
confint(fit2)
confint(fit3)
cbind('dummy' = coef(fit1_1)[2:4],
'score'= coef(fit2)[3:5],
'continuous' = coef(fit3)[3:5])
confint(fit1_1)[2:4,]
confint(fit2)
confint(fit3)
cbind('dummy' = coef(fit1_1)[2:4],
'score'= coef(fit2)[3:5],
'continuous' = coef(fit3)[3:5])
confint(fit1_1)[2:4,]
confint(fit2)[3:5,]
confint(fit3)[3:5,]
fit1_1 <- lm(Depression ~ Fatalism_std + Sex + R_E + factor(age_cat))
#summary(fit1_1)
ss.table <- anova(fit1_1)
ss.table
ss <- sum(ss.table[4, ]$`Sum Sq`)
df <- sum(ss.table[4, ]$Df)
mse <- ss.table['Residuals',]$`Sum Sq`/ss.table['Residuals',]$Df
fstat <- ss / df / mse
fpvalue <-  1-pf(q=fstat, df1=df, df2 = ss.table['Residuals',]$Df)
fpvalue
ss <- sum(ss.table[4, ]$`Sum Sq`)
ss
df <- sum(ss.table[4, ]$Df)
df
mse <- ss.table['Residuals',]$`Sum Sq`/ss.table['Residuals',]$Df
mse
fstat <- ss / df / mse
fstat
fpvalue <-  1-pf(q=fstat, df1=df, df2 = ss.table['Residuals',]$Df)
fpvalue
s$coefficients[, 'Pr(>|t|)']['age_cat']
s <- summary(fit2)
s$coefficients[, 'Pr(>|t|)']['age_cat']
fit2 <- lm(Depression ~ age_cat + Fatalism_std + Sex + R_E)
summary(fit2)
fit1 <- lm(Depression ~ factor(age_cat) + Fatalism_std + Sex + R_E)
summary(fit1)
cf <- summary(lm(Depression ~ age_sc1 + Fatalism_std + Sex + R_E))$coefficients
cf[, 'Pr(>|t|)']['age_sc1']
summary(lm(Depression ~ age_sc1 + Fatalism_std + Sex + R_E))$coefficients
cf[, `t value`]['age_sc1']
cf[, 't_value']['age_sc1']
cf
names(cf)
name(cf)
View(cf)
rownames(cf)
colnames(cf)
cf[, '"t value" ']['age_sc1']
cf[, "t value"]['age_sc1']
cf[, 'Pr(>|t|)']['age_sc1']
tp <- summary(lm(Depression ~ age_sc2 + Fatalism_std + Sex + R_E))$coefficients
tp[, "t value"]['age_sc2']
tp[, 'Pr(>|t|)']['age_sc2']
age_quan
summary(lm(Depression ~ age_sc2 + Fatalism_std + Sex + R_E))$coefficients
age_sc1 <- rep(999, n)
age_sc1[age_cat==0] = 0
age_sc1[age_cat==1] <- 10
age_sc1[age_cat==2] <- 20
age_sc1[age_cat==3] <- 30
var(age_sc1)
tp <- summary(lm(Depression ~ age_sc1 + Fatalism_std + Sex + R_E))$coefficients
tp[, "Std. Error"]['age_sc1']
tp[, "t value"]['age_sc1']
tp[, 'Pr(>|t|)']['age_sc1']
age_sc2 <- rep(999, n)
age_sc2[age_cat==0] = 0
age_sc2[age_cat==1] <- 10
age_sc2[age_cat==2] <- 20
age_sc2[age_cat==3] <- 300
var(age_sc2)
tp <- summary(lm(Depression ~ age_sc2 + Fatalism_std + Sex + R_E))$coefficients
tp[, "Std. Error"]['age_sc2']
tp[, "t value"]['age_sc2']
tp[, 'Pr(>|t|)']['age_sc2']
age_sc3 <- rep(999, n)
age_sc3[age_cat==0] <- mean(Age[age_cat==0])
age_sc3[age_cat==1] <- mean(Age[age_cat==1])
age_sc3[age_cat==2] <- mean(Age[age_cat==2])
age_sc3[age_cat==3] <- mean(Age[age_cat==3])
var(age_sc3)
tp <- summary(lm(Depression ~ age_sc3 + Fatalism_std + Sex + R_E))$coefficients
tp[, "Std. Error"]['age_sc3']
tp[, "t value"]['age_sc3']
tp[, 'Pr(>|t|)']['age_sc3']
devtools::install_git('github/biocore/bayestime')
devtools::install_github('biocore/bayestime')
library(BayesTime)
gggplot()
ggplot()
library(BayesTime)
ggplot()
setwd("~/Dropbox/lab/SFPCA/BayesTime")
use_package("ggplot2")
usethis::use_package("ggplot2")
devtools::load_all(".")
usethis::use_package('ggplot2')
usethis::use_package('ggplot2')
devtools::install_github(/y1zhong/bayestime)
devtools::install_github('y1zhong/bayestime')
library(BayesTime)
ggplot()
ggplot()
ggplot()
library(ggplot2)
ggplot()
devtools::install_github('y1zhong/bayestime')
library(BayesTime)
ggplot()
library(NHANES)
data("NHANES")
force(NHANES)
View(NHANES)
colnames(NHANES)
summary(NHANES$Age)
summary(NHANES$TotChol)
hist(NHANES$TotChol)
NHANES$TotChol
NHANES$DirectChol
NHANES <- sort(colnames(NHANES))
data("NHANES")
NHANES <- NHANES[, ORDER(colnames(NHANES))]
View(NHANES)
NHANES <- NHANES[, order(colnames(NHANES))]
class(NHANES$TotChol)
max(NHANES$TotChol)
NHANES <-na.omit(NHANES)
data("NHANES")
attach(NHANES)
Age
quantile(TotChol)
TotChol <- na.omit(TotChol)
quantile(TotChol)
TotChol[TotChol>11]
hist(BPDiaAve)
BPDiaAve[>80]
BPDiaAve>80
sum(BPSysAve>130)
BPSysAve>130
BPSysAve<-na.omit(BPSysAve)
BPDiaAve <- na.omit(BPDiaAve)
sum(BPDiaAve>80)
sum(BPSysAve>130)
sum(BPSysAve>140)
sum(BPSysAve>180)
TotChol <- na.omit(TotChol)
cor(BPSysAve, TotChol)
sum(BPDiaAve>90)
sum(BPSysAve>120 & BPDiaAve>80)
sum(BPSysAve>130 & BPDiaAve>90)
colnames(NHANES)
Diabetes
table(Diabetes)
Diabetes[BPSys1>130]
Diabetes[BPSys1>140]
data("NHANES")
attach(NHANES)
Diabetes[BPSysAve>140]
Pulse
table(SexOrientation)
Diabetes[BPSysAve>120]
sum(Diabetes[BPSysAve>120])
Diabetes[BPSysAve>120]
HHIncomeMid
table(HHIncomeMid)
colnames(NHANES)
NHANES <- NHANES[, order(colnames(NHANES))]
View(NHANES)
Poverty
na.omit(Poverty)
hist(na.omit(poverty))
hist(na.omit(Poverty))
hist(BPSysAve)
a <- NHANES[,c('BPsysAve','Poverty')]
a <- NHANES[,c('BPSysAve','Poverty')]
a <- na.omit(a)
plot(a$BPSysAve, a$Poverty)
table(Race1)
table(Race3)
table(Depressed)
table(MaritalStatus)
